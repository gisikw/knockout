---
id: ko-21a7
status: closed
deps: []
links: []
created: 2026-02-19T15:57:21Z
type: task
priority: 2
---
# Emit mutation events to a well-known event stream on every ticket change

## Notes

**2026-02-19 15:57:31 UTC:** Every ko mutation (create, close, reopen, start, block, add-note, bump, dep/undep) should append a JSONL line to a well-known event file. Location: $XDG_STATE_HOME/knockout/events.jsonl (default ~/.local/state/knockout/events.jsonl). Format:

{"ts":"2026-02-19T...","event":"status","project":"/home/dev/Projects/exocortex","ticket":"exo-10e2","data":{"from":"open","to":"closed"}}
{"ts":"2026-02-19T...","event":"create","project":"/home/dev/Projects/knockout","ticket":"ko-fb9e","data":{"title":"..."}}
{"ts":"2026-02-19T...","event":"bump","project":"/home/dev/Projects/exocortex","ticket":"exo-a1b2"}

This is distinct from KO_EVENT_LOG (build/loop pipeline events). This is for all ticket mutations, not just pipeline runs. The file is append-only, consumers tail it. The project path comes from FindTicketsDir -> ProjectRoot. Event types: create, status, note, bump, dep, undep, link, unlink. Implementation: a small emitEvent() helper called at the end of each cmd_*.go mutation function.
