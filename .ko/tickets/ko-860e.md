---
id: ko-860e
status: blocked
deps: []
created: 2026-02-25T20:06:49Z
type: task
priority: 2
plan-questions:
  - id: q1
    question: "What format should bare `ko triage <id>` use to display block reason and open questions?"
    context: "The ticket spec says 'show block reason + open questions' but doesn't specify format. The current assumption is human-readable text with block reason followed by JSON array of questions, matching existing `ko questions` output."
    options:
      - label: "Human-readable with JSON (Recommended)"
        value: human_json_hybrid
        description: "Show block reason as text, followed by JSON array of questions for machine-readability"
      - label: "JSON-only"
        value: json_only
        description: "Output a single JSON object with block reason and questions fields"
      - label: "Human-readable only"
        value: human_only
        description: "Format block reason and questions as human-readable text without JSON"
  - id: q2
    question: "What note format should `ko triage <id> --block <reason>` use when saving the block reason?"
    context: "The existing `ExtractBlockReason` function parses notes in the format 'ko: BLOCKED — {reason}'. The plan assumes this format should be used for consistency, but we need to confirm."
    options:
      - label: "Parseable format (Recommended)"
        value: parseable_format
        description: "Use 'ko: BLOCKED — {reason}' format so ExtractBlockReason can extract it consistently"
      - label: "Plaintext format"
        value: plaintext_format
        description: "Store reason as plain text without the 'ko: BLOCKED' prefix"
  - id: q3
    question: "Should this be a breaking change by removing the old commands entirely, or maintain backward compatibility?"
    context: "The ticket says 'Replaces' which implies removal. However, this breaks existing scripts that call `ko block`, `ko questions`, or `ko answer`. The plan assumes full removal per ticket spec."
    options:
      - label: "Remove entirely (Recommended)"
        value: breaking_change
        description: "Delete old commands as specified in ticket, breaking existing scripts"
      - label: "Keep as aliases"
        value: aliases
        description: "Maintain old commands as wrappers that call `ko triage` for backward compatibility"
---
# Consolidate block/questions/answer into ko triage

Replace three commands with one:

ko triage <id>                          # show triage state (questions, block status)
ko triage <id> --questions '[...]'      # block with plan questions
ko triage <id> --answers '{...}'        # answer questions, auto-unblock when all answered
ko triage <id> 'block reason'           # block with reason text

Replaces: ko block --questions, ko questions, ko answer

Open question: should bare 'ko block <id>' (no reason) still be supported, or require a reason? Leaning toward requiring a reason — if you're blocking, say why.

## Notes

**2026-02-25 20:09:47 UTC:** Revised design:

ko triage <id>                           # show block reason + open questions
ko triage <id> --block ['reason']        # set to blocked, optional reason added as note
ko triage <id> --questions 'json'        # add questions, implicitly blocks
ko triage <id> --answers 'json'          # answer questions, implicitly opens when all answered

Status transitions are implicit:
- --questions → status=blocked (you're saying 'this needs answers before it can proceed')
- --answers that resolve all questions → status=open (unblocked)
- --block → status=blocked (explicit block with optional reason)

Replaces: ko block, ko block --questions, ko questions, ko answer
