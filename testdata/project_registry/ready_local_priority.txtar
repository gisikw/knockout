# Local ready tickets take priority over cross-project checks
env HOME=$WORK/home
mkdir $WORK/home

# Set up two projects
mkdir $WORK/alpha/.ko/tickets
mkdir $WORK/beta/.ko/tickets
cd $WORK/alpha
exec ko project set '#alpha'
cd $WORK/beta
exec ko project set '#beta'
cd $WORK/alpha

# beta-0001 is closed
cp $WORK/beta_ticket.txt $WORK/beta/.ko/tickets/beta-0001.md

# alpha has a locally ready ticket AND one blocked on cross-project dep
cp $WORK/alpha_ready.txt $WORK/alpha/.ko/tickets/alp-0001.md
cp $WORK/alpha_blocked.txt $WORK/alpha/.ko/tickets/alp-0002.md

# Ready should show the local ticket
exec ko ready
stdout 'alp-0001'
stdout 'Local ready'

-- beta_ticket.txt --
---
id: beta-0001
status: closed
deps: []
created: 2026-01-01T00:00:00Z
type: task
priority: 2
---
# Beta task

-- alpha_ready.txt --
---
id: alp-0001
status: open
deps: []
created: 2026-01-01T00:00:00Z
type: task
priority: 2
---
# Local ready

-- alpha_blocked.txt --
---
id: alp-0002
status: open
deps: [beta-0001]
created: 2026-01-01T00:00:00Z
type: task
priority: 2
---
# Cross-project blocked
