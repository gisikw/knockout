---
id: ko-6733
status: blocked
deps: [ko-13af, ko-68c3]
created: 2026-02-28T07:40:28Z
type: task
priority: 2
plan-questions:
  - id: q1
    question: "Should `ko agent triage` enforce `allowAll=true` for tool calls, or respect the pipeline configuration?"
    context: "Triage operations typically require running `ko` shell commands. The plan currently uses `p.AllowAll` from pipeline config, but this may restrict access on restrictive pipelines. Forcing `true` is more ergonomic but bypasses user permission settings."
    options:
      - label: "Force allowAll=true (Recommended)"
        value: force_allow_all
        description: "Always enable all tool calls for triage operations, regardless of pipeline config—more reliable for triage work"
      - label: "Use pipeline config setting"
        value: respect_config
        description: "Respect the pipeline's allow_all_tool_calls setting; users must configure it explicitly for triage to work"
  - id: q2
    question: "Should `ko agent triage` require a pipeline configuration to exist, or fall back to a default adapter?"
    context: "The plan currently requires a pipeline config via `FindPipelineConfig`. The ticket says 'load default model', but it's unclear whether a pipeline is mandatory or if a hardcoded default (e.g., 'claude') should be used when no config exists."
    options:
      - label: "Require pipeline config"
        value: require_pipeline
        description: "Fail with a clear error if no pipeline exists—ensures intentional setup"
      - label: "Fall back to default (claude) (Recommended)"
        value: default_fallback
        description: "Use a hardcoded default adapter and model if no pipeline config exists—works on fresh projects"
---
# ko agent triage <id> — load default model and prompt it to handle the ticket per its triage instructions. Provide ko usage tokens so the model can operate on tickets. On success (no error), clear the triage field from the ticket (if it still exists).
