---
id: ko-8e81
status: open
deps: []
created: 2026-02-25T05:49:39Z
type: task
priority: 2
---
# ko serve: minimal HTTP daemon with POST /ko exec endpoint

Add a `ko serve` command that starts an HTTP server (default :9876, configurable
with `-p`).

Single endpoint:

    POST /ko
    Body: {"argv": ["ls", "--limit", "5", "--json"]}
    Response: stdout from exec("ko", argv...), Content-Type: application/json

Implementation:
- New file cmd_serve.go
- Parse argv from JSON body
- Whitelist: only allow known ko subcommands (ls, ready, blocked, resolved,
  closed, query, show, questions, answer, close, reopen, block, start, bump,
  note, status, dep, undep, agent). Reject anything else with 400.
- exec.Command("ko", argv...) — use the same binary path (os.Args[0])
- stdout → response body, stderr → ignored (or logged)
- Exit code 0 → 200, non-zero → 400 with stderr in error field
- No auth for now (single-user, localhost)
- Graceful shutdown on SIGTERM/SIGINT

Do NOT add SSE, WebSocket, or any subscription mechanism — that's a separate ticket.
Do NOT add CORS, TLS, or reverse proxy concerns.

